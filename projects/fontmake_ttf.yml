name: fontmake TTF output
url: https://github.com/googlefonts/fontmake
description: fontmake in its default configuration, only TTF output
versions:
  - id: git-main-ufo2ft-avoid-reloading
    description: Nikolaus version that avoid copying fonts during compilation
    setup_script:
      - python -m pip install --upgrade pip
      - python -m pip install "fonttools[ufo,lxml,unicode] @ git+git://github.com/fonttools/fonttools@0e5fe2d1d7" git+git://github.com/googlefonts/ufo2ft@41d7218655e46 fontmake==2.4.0
  - id: git-main-ufo2ft-avoid-reloading-iondrive
    description: Nikolaus version that avoid copying fonts during compilation, with Rust UFO loader
    setup_script:
      - python -m pip install --upgrade pip
      - python -m pip install iondrive
      - python -m pip install git+git://github.com/simoncozens/ufoLib2@iondrive
      - python -m pip install "fonttools[ufo,lxml,unicode] @ git+git://github.com/fonttools/fonttools@0e5fe2d1d7" git+git://github.com/googlefonts/ufo2ft@41d7218655e46 fontmake==2.4.0
  - id: v2.4.0-plus-iondrive
    description: fontmake official release, with Rust UFO loader
    setup_script:
      - python -m pip install --upgrade pip
      - python -m pip install wheel
      - python -m pip install iondrive
      - python -m pip install git+git://github.com/simoncozens/ufoLib2@iondrive"
      - python -m pip install fontmake==2.4.0
  - id: v2.4.0
    description: official release
    setup_script:
      - python -m pip install --upgrade pip
      - python -m pip install fontmake==2.4.0
  - id: v2.3.1
    description: official release
    setup_script:
      - python -m pip install --upgrade pip
      - python -m pip install fontmake==2.3.1
scenarios:
  - id: narrow_build_vf_from_designspace
    before_script:
      - pip list
    timed_script:
      - fontmake --verbose WARNING -m $DESIGNSPACE -o variable
  - id: narrow_build_vf_from_glyphs
    before_script:
      - pip list
    timed_script:
      - fontmake --verbose WARNING -g $GLYPHS_FILE -o variable
  - id: fat_build_instances
    before_script:
      - pip list
    timed_script:
      - fontmake --verbose WARNING -m $DESIGNSPACE -i -o ttf
